<!DOCTYPE html>
<html>
<head>
	<title>Plan with friends!</title>
	<link rel="stylesheet" href="https://www.w3schools.com/w3css/4/w3.css">
	<link rel="stylesheet" type="text/css" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
	<link rel="stylesheet" type="text/css" href="static/css/styleFriends.css">
</head>
<body>
	<div id="heading" class="container">
		<div id="topDetails">
			<p id="myLat" style="display: none"><%= myLat %></p>
			<p id="myLong" style="display: none"><%= myLong %></p>
  			<a id="right1" href="/">Home</a>
			<a id="right2" href="/logout">Logout</a>
		</div>
	 	 <div id="heading2" class="jumbotron">

	    <h1>Your group consists of:</h1> 
	    <p>|
	    	<% for(var i=0; i < actualFriends.length; i++) { %>
				<span><%=actualFriends[i]%> |</span>
			<%}%>
	    </p> 
			<% if(learntData.length==0){ %>
			   <h3>Please rate atleast 4 restaurants to receive recommendations</h3>
			 <% } else{ %>  
	   			 <h3>The following best matches your group's taste</h3>
			<% } %>	    
	  </div>
	</div>
	<!-- asd -->
		<!-- AIzaSyB_MqXWRuGlOe-uoOOPiSzsPI8cQuXLbxU -->
	<% if(learntData.length!=0){ %>
	<div id="map"></div>	
	<!-- sd -->
	<div id="cards">	
	
		<% for(var i=0; i < learntData.length; i++) { %>
			<div style="width:33.33%" class="container" ontouchstart="this.classList.toggle('hover');">
				<div class="flipper">
					<div class="front">		
					  <div class="w3-card-4" style="width:100%">
					    <img id="hei1" src="<%= outlets[learntData[i][2]]['img'] %>" alt="Norway" style="width:100%">
					    <div  id="hei2" class="w3-container w3-center">
					      <p class="restName"> <%= outlets[learntData[i][2]]["name"] %></p>
					    </div>
					  </div>
					</div>	
					<div class="back">		
					  <div class="w3-card-4" style="width:100%">
					    <div class="w3-container w3-left">
					      <p>Address: <%= outlets[learntData[i][2]]["address"] %></p>
					      <p>Cuisine: <%= outlets[learntData[i][2]]["cuisine"] %></p>
					      <p>Phone: <%= outlets[learntData[i][2]]["phone"] %></p>
					      <p style="font-size: 0.9em">About: <%= outlets[learntData[i][2]]["about"] %></p>
					      <p class="lat" style="display: none"><%= outlets[learntData[i][2]]["lat,long"].split(",")[0] %></p>
					      <p class="long" style="display: none"><%= outlets[learntData[i][2]]["lat,long"].split(",")[1]%></p>
					    </div>
					  </div>
					</div>
				</div>
			</div>
		<%}%>
	<%}%>
	</div>

	
	
</body>
</html>
  <script src='http://cdnjs.cloudflare.com/ajax/libs/jquery/2.1.3/jquery.min.js'></script>

<script>
		  function initMap() {
		    var myLoc = {lat:Number($("#myLat").html()) , lng: Number($("#myLong").html())};
		    var rest1 ={lat:Number($(".lat")[0].innerHTML), lng: Number($(".long")[0].innerHTML)}
		    var rest2 ={lat:Number($(".lat")[1].innerHTML), lng: Number($(".long")[1].innerHTML)}
		    var rest3 ={lat:Number($(".lat")[2].innerHTML), lng: Number($(".long")[2].innerHTML)}
		    var rest4 ={lat:Number($(".lat")[3].innerHTML), lng: Number($(".long")[3].innerHTML)}
		    var rest5 ={lat:Number($(".lat")[4].innerHTML), lng: Number($(".long")[4].innerHTML)}
		    var rest6 ={lat:Number($(".lat")[5].innerHTML), lng: Number($(".long")[5].innerHTML)}
		    var rest7 ={lat:Number($(".lat")[6].innerHTML), lng: Number($(".long")[6].innerHTML)}
		    var rest8 ={lat:Number($(".lat")[7].innerHTML), lng: Number($(".long")[7].innerHTML)}


		    var map = new google.maps.Map(document.getElementById('map'), {
		      zoom: 13,
		      center: myLoc
		    });
		    var marker = new google.maps.Marker({
		      position: myLoc,
		      map: map,
		      title: "My location",
		      animation: google.maps.Animation.DROP,

		    });

		    var restMarker1 = new google.maps.Marker({
		      position: rest1,
		      map: map,
		      animation: google.maps.Animation.DROP,
		      title: $(".restName")[0].innerHTML

		    });
		    var restMarker2 = new google.maps.Marker({
		      position: rest2,
		      map: map,
		      animation: google.maps.Animation.DROP,
		      title: $(".restName")[1].innerHTML
		    });
		    var restMarker3 = new google.maps.Marker({
		      position: rest3,
		      map: map,
		      animation: google.maps.Animation.DROP,
		      title: $(".restName")[2].innerHTML
		    });
		    var restMarker4 = new google.maps.Marker({
		      position: rest4,
		      map: map,
		      animation: google.maps.Animation.DROP,
		      title: $(".restName")[3].innerHTML
		    });
		    var restMarker5 = new google.maps.Marker({
		      position: rest5,
		      map: map,
		      animation: google.maps.Animation.DROP,
		      title: $(".restName")[4].innerHTML
		    });
		    var restMarker6 = new google.maps.Marker({
		      position: rest6,
		      map: map,
		      animation: google.maps.Animation.DROP,
		      title: $(".restName")[5].innerHTML
		    });
		    var restMarker7 = new google.maps.Marker({
		      position: rest7,
		      map: map,
		      animation: google.maps.Animation.DROP,
		      title: $(".restName")[6].innerHTML
		    });
		    var restMarker8 = new google.maps.Marker({
		      position: rest8,
		      map: map,
		      animation: google.maps.Animation.DROP,
		      title: $(".restName")[7].innerHTML
		    });
		    

		  }
		</script>
		<script async defer
		src="https://maps.googleapis.com/maps/api/js?key=AIzaSyCzAuBSIq6lUOLTNjNbFCt5uo7QbD7WZo8&callback=initMap">
		</script>




<!-- 

<% if(learntData.length==0){ %>
   <h3>Please rate atleast 4 restaurants to receive recommendations</h3>
 <% } else{ %>  
   <p>Your predicted ratings are: </p>
	<% for(var i=0; i < learntData.length; i++) { %>
			<div>
				<p><%= learntData[i][2] %> is predicted to be <%= learntData[i][1] %> </p>
			</div>
		<%}%>
<% } %> -->